!function(){function t(o,i,r){function n(e,s){if(!i[e]){if(!o[e]){var d="function"==typeof require&&require;if(!s&&d)return d(e,!0);if(a)return a(e,!0);var h=new Error("Cannot find module '"+e+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[e]={exports:{}};o[e][0].call(l.exports,function(t){return n(o[e][1][t]||t)},l,l.exports,t,o,i,r)}return i[e].exports}for(var a="function"==typeof require&&require,e=0;e<r.length;e++)n(r[e]);return n}return t}()({1:[function(t,o,i){"use strict";!function(t){var o=window.imkt||(window.imkt={});o.utils=o.utils||{},o.sourcetree=o.sourcetree||{},o.sourcetree.Homepage=function(o,i){this.$domRoot=t("body"),this.$navbarCTA=t("#navDownloadButton",this.$domRoot),this.$buttonHero=t(".product-tour-hero--video__button .button",this.$domRoot),this.$linkHero=t(".product-tour-hero--video__link--secondary .cms-link",this.$domRoot),this.$buttonPrimary=t(".button--primary-download",this.$domRoot),this.$buttonSecondary=t(".button--secondary-download",this.$domRoot),this.$buttonDownloadAgain=t(".download--again",this.$domRoot),this.downloadButtons=[this.$navbarCTA,this.$buttonHero,this.$linkHero,this.$buttonPrimary,this.$buttonSecondary],this.downloadUrlMac=this.$buttonHero.attr("href"),this.downloadUrlWindows=this.$linkHero.attr("href"),this.STRING_MAC="Mac OS X",this.STRING_WINDOWS="Windows",this.init()},o.sourcetree.Homepage.prototype={init:function(){t("body").hasClass("edit")||this.bindEvents()},bindClickDownload:function(o){var i=this,r=window.imkt||(window.imkt={});r.common=r.common||{},r.common.DownloadHelper.download(t("#download-view"),o),t(o).on("click",function(t){i.trackEvent(t)})},bindEvents:function(){this.downloadButtons.forEach(this.bindClickDownload,this),this.setDefaultDataAttributes(),o.utils.browser.isWindows()&&this.swapDownloadLinks(),this.downloadButtons.forEach(function(t){t.attr("data-href",t.attr("href"))})},trackEvent:function(t){o.utils.tracking.trackEvent("Started Download",this.buildTrackingData(t.currentTarget))},setDefaultDataAttributes:function(){this.$buttonPrimary.data("platform",this.STRING_MAC),this.$buttonSecondary.data("platform",this.STRING_WINDOWS),this.$buttonHero.data("platform",this.STRING_MAC),this.$linkHero.data("platform",this.STRING_WINDOWS),this.$navbarCTA.data("platform",this.STRING_MAC),this.$buttonDownloadAgain.data("platform",this.STRING_MAC)},swapDownloadLinks:function(){var t=this.$buttonHero.text(),o=this.$linkHero.text();this.$buttonHero.attr("href",this.downloadUrlWindows).text(t.replace(this.STRING_MAC,this.STRING_WINDOWS)),this.$linkHero.attr("href",this.downloadUrlMac).text(o.replace(this.STRING_WINDOWS,this.STRING_MAC)),this.$buttonHero.data("platform",this.STRING_WINDOWS),this.$linkHero.data("platform",this.STRING_MAC),this.$buttonPrimary.attr("href",this.downloadUrlWindows).text(t.replace(this.STRING_MAC,this.STRING_WINDOWS)),this.$buttonSecondary.attr("href",this.downloadUrlMac).text(o.replace(this.STRING_WINDOWS,this.STRING_MAC)),this.$buttonPrimary.data("platform",this.STRING_WINDOWS),this.$buttonSecondary.data("platform",this.STRING_MAC),this.$navbarCTA.attr("href",this.downloadUrlWindows),this.$navbarCTA.data("platform",this.STRING_WINDOWS),this.$buttonDownloadAgain.data("platform",this.STRING_WINDOWS)},getFileName:function(t){var o;try{o=t.substr(t.lastIndexOf("/")+1)}catch(t){o="Unknown"}return o},buildTrackingData:function(i){var r=t(i).attr("href").split("?")[0];return{productName:"SourceTree",productPlatform:t(i).data("platform"),fileName:this.getFileName(r),fileUrl:r,optimizelyBuckets:o.utils.storage.getCookie("optimizelyBuckets"),optimizelyEndUserId:o.utils.storage.getCookie("optimizelyEndUserId"),optimizelySegments:o.utils.storage.getCookie("optimizelySegments"),atlPath:o.utils.storage.getCookie("__atl_path")}}},t(function(){new o.sourcetree.Homepage})}(jQuery)},{}]},{},[1]);